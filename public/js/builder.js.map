{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/blueimp-tmpl/js/tmpl.js","webpack:///./resources/js/app.js","webpack:///./resources/js/builder_controller.js"],"names":["window","application","register","BulderController","console","log","document","querySelector","addEventListener","saveModel","event","which","columnTarget","value","trim","element","createTrFromHTML","tmpl","getElementById","appendChild","preventDefault","path","forEach","nodeName","remove","model","relationTarget","axios","post","platform","prefix","then","response","innerHTML","data","htmlString","tr","createElement","oData","FormData","location","toString","Controller"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,IAAI,UAAU,OAAO,mBAAmB,KAAK,OAAO;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yBAAyB,QAAQ,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,eAAe;AACf,gBAAgB;AAChB,eAAe;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0BAA0B,4BAA4B;AACtD,4BAA4B,eAAe;AAC3C,MAAM,IAA0C;AAChD,IAAI,mCAAO;AACX;AACA,KAAK;AAAA,oGAAC;AACN,GAAG,MAAM,EAIN;AACH,CAAC;;;;;;;;;;;;;AC9FD;AAAA;AAAA;AAEAA,MAAM,CAACC,W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","file":"/js/builder.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*\n * JavaScript Templates\n * https://github.com/blueimp/JavaScript-Templates\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Inspired by John Resig's JavaScript Micro-Templating:\n * http://ejohn.org/blog/javascript-micro-templating/\n */\n\n/* global define */\n\n;(function ($) {\n  'use strict'\n  var tmpl = function (str, data) {\n    var f = !/[^\\w\\-.:]/.test(str)\n      ? (tmpl.cache[str] = tmpl.cache[str] || tmpl(tmpl.load(str)))\n      : new Function( // eslint-disable-line no-new-func\n        tmpl.arg + ',tmpl',\n        'var _e=tmpl.encode' +\n            tmpl.helper +\n            \",_s='\" +\n            str.replace(tmpl.regexp, tmpl.func) +\n            \"';return _s;\"\n      )\n    return data\n      ? f(data, tmpl)\n      : function (data) {\n        return f(data, tmpl)\n      }\n  }\n  tmpl.cache = {}\n  tmpl.load = function (id) {\n    return document.getElementById(id).innerHTML\n  }\n  tmpl.regexp = /([\\s'\\\\])(?!(?:[^{]|\\{(?!%))*%\\})|(?:\\{%(=|#)([\\s\\S]+?)%\\})|(\\{%)|(%\\})/g\n  tmpl.func = function (s, p1, p2, p3, p4, p5) {\n    if (p1) {\n      // whitespace, quote and backspace in HTML context\n      return (\n        {\n          '\\n': '\\\\n',\n          '\\r': '\\\\r',\n          '\\t': '\\\\t',\n          ' ': ' '\n        }[p1] || '\\\\' + p1\n      )\n    }\n    if (p2) {\n      // interpolation: {%=prop%}, or unescaped: {%#prop%}\n      if (p2 === '=') {\n        return \"'+_e(\" + p3 + \")+'\"\n      }\n      return \"'+(\" + p3 + \"==null?'':\" + p3 + \")+'\"\n    }\n    if (p4) {\n      // evaluation start tag: {%\n      return \"';\"\n    }\n    if (p5) {\n      // evaluation end tag: %}\n      return \"_s+='\"\n    }\n  }\n  tmpl.encReg = /[<>&\"'\\x00]/g // eslint-disable-line no-control-regex\n  tmpl.encMap = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  }\n  tmpl.encode = function (s) {\n    return (s == null ? '' : '' + s).replace(tmpl.encReg, function (c) {\n      return tmpl.encMap[c] || ''\n    })\n  }\n  tmpl.arg = 'o'\n  tmpl.helper =\n    \",print=function(s,e){_s+=e?(s==null?'':s):_e(s);}\" +\n    ',include=function(s,d){_s+=tmpl(s,d);}'\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return tmpl\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = tmpl\n  } else {\n    $.tmpl = tmpl\n  }\n})(this)\n","import BulderController from \"./builder_controller\";\n\nwindow.application.register(\"components--builder\", BulderController);","import tmpl         from 'blueimp-tmpl';\n\nexport default class extends window.Controller {\n\n    /**\n     *\n     * @type {string[]}\n     */\n    static targets = [\n        \"column\",\n        \"relation\"\n    ];\n\n    /**\n     *\n     */\n    connect() {\n        console.log('test');\n        console.log('this');\n\n        document.querySelector(`#post-form`).addEventListener('change', this.saveModel);\n    }\n\n    /**\n     *\n     * @param event\n     * @returns {*}\n     */\n    addColumn(event) {\n\n        if (event.which !== 13 && event.which !== 1) {\n            return;\n        }\n\n        if (this.columnTarget.value.trim() === '') {\n            return;\n        }\n\n        if (document.querySelector(`input[name=\"columns[${this.columnTarget.value}][name]\"]`) !== null) {\n            return;\n        }\n\n        let element = this.createTrFromHTML(tmpl(\"boot-template-column\", {\n            \"field\": this.columnTarget.value,\n        }));\n\n        document.getElementById('boot-container-column').appendChild(element);\n        this.columnTarget.value = '';\n        this.saveModel();\n\n        return event.preventDefault();\n    }\n\n    /**\n     *\n     * @param event\n     */\n    removeColumn(event) {\n        event.path.forEach((element) => {\n            if (element.nodeName === 'TR') {\n                element.remove();\n                return event.preventDefault();\n            }\n        });\n        this.saveModel();\n    }\n\n    /**\n     *\n     */\n    addRelation(event) {\n\n        let model = this.relationTarget.value;\n\n        if (event.which !== 13 && event.which !== 1) {\n            return;\n        }\n\n        if (model.trim() === '') {\n            return;\n        }\n\n        if (document.querySelector(`input[name=\"relations[${model}][name]\"]`) !== null) {\n            return;\n        }\n\n        let element = this.createTrFromHTML(tmpl(\"boot-template-relationship\", {\n            \"field\": model,\n        }));\n\n        axios\n            .post(platform.prefix(`/bulldozer/${model}/getRelated`))\n            .then(response => {\n                document.querySelector(`select[name=\"relations[${model}][related]\"]`).innerHTML = response.data;\n            });\n\n        document.getElementById('boot-container-relationship').appendChild(element);\n        this.saveModel();\n\n        return event.preventDefault();\n    }\n\n    /**\n     *\n     * @param htmlString\n     * @returns {Node | null}\n     */\n    createTrFromHTML(htmlString) {\n        let tr = document.createElement('tr');\n        tr.innerHTML = htmlString.trim();\n\n        return tr;\n    }\n\n    /**\n     * Save model for background\n     */\n    saveModel() {\n        let oData = new FormData(document.querySelector(`#post-form`));\n\n        axios\n            .post(window.location.toString() + `/save`, oData);\n    }\n}"],"sourceRoot":""}